<!doctype html><html lang=ja><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
<link rel=stylesheet href=/sass/main.min.ebf953826ec39760c462d7fdf952404c734dabd6003b608b954f4693f77d2b3f.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css integrity=sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js integrity=sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script defer>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<script defer src=/js/prism.min.js></script>
<link rel=stylesheet href=/css/prism.min.css>
</head>
<body>
<main id=content>
<p class=category>
カテゴリー: <a href=/post>post</a>
</p>
<article class=suuri><ul>
<li>読んだ本: <a href=https://booth.pm/ja/items/1035782>https://booth.pm/ja/items/1035782</a></li>
<li>以前りゅーそうさんという方の <a href=https://ryusou.dev/posts/beginner-uidesignbook>はじめての UI デザインの教科書をフロントエンジニアの方と読んだ</a> という記事を読み、誰かこれやりませんかと積読リストを公開したところ、 <a href=https://twitter.com/ainoz10>あいのざさん</a> からリプライ頂いたので読んで感想を通話で話しました。</li>
<li>アイデアの元になったりゅーそうさん、もやし丸さん、そして乗ってきてくださたあいのざさん、ありがとうございます。</li>
</ul>
<h2 id=-積読解消会の進め方># 積読解消会の進め方</h2>
<ul>
<li>読む本を決めて、DM で進捗を報告しながら読み進める(今回は 30 ページほどの本だったが、環境構築など、手を動かす必要があった)</li>
<li>報告はこんな感じ: 今日は 15 ページまで進めました。環境構築で詰まったところは gist に置きました(gist のリンク)</li>
<li>だいたいお互い終了したところで通話する日程を決める</li>
<li>こんな感じ: discord で土曜日の 14:00-15:00 にやる(実際は 14:30-16:30 になった)</li>
<li>(りゅーそうさんのブログには 2 時間とあったが、初めて話す相手なので 1 時間とっておいて、後ろは予定を入れず延長可能にしておいた)</li>
<li>お話する</li>
<li>終わり</li>
</ul>
<h2 id=-まとめと感想># まとめと感想</h2>
<ul>
<li>go なら alp と pprof</li>
<li>本体のソースコードの他に、nginx などミドルウェアにも詳しくなる必要がある。</li>
<li>最初に ISUCON に挑戦しても分からないと思うので、この本のようなチュートリアルはありがたい。得点も 10 倍になって簡単な修正で一気に点数が上がってとても楽しい</li>
<li>普段ゼロから Web アプリを書くと自分で書いたので勝手が分かるが、ISUCON のように他の人の書いたものだと勝手が分からない。経験値が必要。</li>
<li>ISUCON の典型が知りたい。パフォーマンスチューニングのまずこれを疑え！的な典型集が欲しい。</li>
</ul>
<h2 id=-本書を現在20210116やると遭遇するトラブルシューティング># 本書を現在(2021/01/16)やると遭遇するトラブルシューティング</h2>
<h2 id=-xbuild-go-install-が動かない>## xbuild go-install が動かない</h2>
<ul>
<li>Conoha では気にしなくてよいです。</li>
<li>vagrant でやる場合、 <a href=https://github.com/matsuu/vagrant-isucon>https://github.com/matsuu/vagrant-isucon</a> を使うと xbuild が失敗する。</li>
<li>go の公式ページに従ってバイナリを wget/curl してインストールする</li>
</ul>
<h2 id=-pprof-を実行するときに-tau-が必要>## pprof を実行するときに tau が必要</h2>
<ul>
<li>pprof を入れると、tau がないと言われる</li>
<li>以下のように対応し、go tool から実行する</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>sudo apt-get install tau
go tool pprof localhost:8080 ~/isubata/webapp/go/src/isubata http://localhost:6060/debug/pprof/profile?seconds<span class=o>=</span><span class=m>60</span>
</code></pre></div><h2 id=-go-sql-driver-が使えない>## go-sql-driver が使えない</h2>
<ul>
<li>go v1.9 で <code>go get go-sql-driver</code> すると、Builder 周りの v1.10 の機能をつかっているために go のビルドが通らない</li>
<li>以下のように、ライブラリ部分で git checkout して過去のタグがつけられた commit に戻ると使えるようになる。</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell>go get github.com/go-sql-driver/mysql
<span class=nb>cd</span> github.com/
mkdir go-sql-driver
<span class=nb>cd</span> go-sql-driver
git clone https://github.com/go-sql-driver/mysql.git
git checkout v1.4
</code></pre></div><h2 id=-今後やってみたいこと># 今後やってみたいこと</h2>
<ul>
<li>ISUCON7qual でさらなる改良をする。特に、今回は書籍に書いてあることしかしていないので、自力で考え出して(アイデアパート)自力で実装したい(実装パート)</li>
<li>ISUCON の典型をまとめたい。ISUCON 慣れしたい。</li>
<li>ましさんの N+1 検出ツール <a href=https://mesimasi.com/mercari_go_one/>https://mesimasi.com/mercari_go_one/</a> のようなツールを試してみたい。これを使うためには go のバージョンを上げる必要があるので、ついでに Ubuntu20.04 対応をしたい。(ansible 書き換え)</li>
<li>mini ISUCON 練習会を身内でやってみたい。ISUCON の運営楽しそうすぎる。(競技環境のホスティングのように、高度に厳しい状況でインフラをするの楽しそう)</li>
</ul>
</article>
<footer>
<p class=license>
This document is licensed under
<a href=https://creativecommons.org/licenses/by/4.0/ target=_blank rel="noopener noreferrer">CC-BY-4.0</a>
</p>
<p class=repository>
<a href=https://github.com/uta8a/discussion/discussions/1 target=_blank rel="noopener noreferrer">discussion</a>にコメントする
</p>
</footer>
</main>
</body>
</html>