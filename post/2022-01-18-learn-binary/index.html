<!doctype html><html lang=ja><head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1">
<link rel=stylesheet href=/sass/main.min.ebf953826ec39760c462d7fdf952404c734dabd6003b608b954f4693f77d2b3f.css>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css integrity=sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB crossorigin=anonymous>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js integrity=sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous onload=renderMathInElement(document.body)></script>
<script defer>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<script defer src=/js/prism.min.js></script>
<link rel=stylesheet href=/css/prism.min.css>
</head>
<body>
<main id=content>
<p class=category>
カテゴリー: <a href=/post>post</a>
</p>
<article class=suuri><p><a href=https://nextpublishing.jp/book/11353.html>はじめて学ぶバイナリ解析 不正なコードからコンピュータを守るサイバーセキュリティ技術</a> を読み終えました。</p>
<h2 id=概要>概要</h2>
<p>VMware や VirtualBox のような仮想環境を用いて、以下のトピックを手を動かしながら学ぶ。</p>
<ul>
<li>脆弱性とは何か</li>
<li>アセンブラについて</li>
<li>バイトオーダー(リトルエンディアン)について</li>
<li>メモリレイアウトについて(スタック領域)</li>
<li>レジスタについて</li>
<li>アセンブリを書いてシステムコールを使う(<code>int 0x80</code>)</li>
<li>gdb-peda の使い方</li>
<li>リターンアドレスの書き換え、ret2libc</li>
<li>shellcode</li>
</ul>
<p>私は 4 回に分けて 3 時間ほどで読み終えました。事前知識としてアセンブリ等はすでに知っていたので、この分野をよく知らなかったらもう少し時間がかかっていたと思います。</p>
<p>この本の良さは「バイナリ解析は理論と観測の 2 つのアプローチを交えて動作を解析することが大切」という本の中で出てくる言葉に集約されていて、理論面(紙とかにメモリレイアウトを書く)、観測(gdb を動かして様子を観察する)を両方行うことが大切だと感じました。同時に、ステップアップして理解していけるような例を構成できる力も大事だなと思いました。</p>
<h2 id=できるようになったこと>できるようになったこと</h2>
<ul>
<li>スタック、特に ESP とかの動きを自信を持って答えられるようになった</li>
<li>リトルエンディアンについて、気にしなきゃいけない状態の条件をきっちり理解した</li>
<li>32bit で SSP 無効 ASLR オフでのバッファオーバーフローの Exploit が書けるようになった</li>
<li>ret2libc と shellcode を部分的に理解した</li>
<li><code>int 0x80</code> を使ったシステムコールのアセンブリでの呼び方を理解して実際に書いた</li>
</ul>
<h2 id=本を読んでいる途中気づいたこと>本を読んでいる途中気づいたこと</h2>
<ul>
<li><strong>仮想環境の環境構築の話</strong>: VMware を使った。ova を google drive からダウンロードしてそのまま VMware で開ける雰囲気がするがうまく行かない。本にも書いてあるが、ova ファイルは解凍できるので解凍して ovf ファイルをインポートしよう。</li>
<li><strong>仮想環境の環境構築の話</strong>: ovf ファイルをインポートするときにインポートに何回か失敗する。Document 以下にディレクトリを作ろうとして Windows Defender にブロックされていたことが原因だった。</li>
<li><strong>Ubuntu の設定の話</strong>: キーボード配列はデフォルトで日本語なので、US キーボードなら settings を開いて日本語を消すと US のみになる。</li>
</ul>
<h2 id=今後やりたいこと>今後やりたいこと</h2>
<ul>
<li>セキュアコーディング系の読み物を読む: <a href=https://www.jpcert.or.jp/securecoding/>https://www.jpcert.or.jp/securecoding/</a> など</li>
<li>ret2libc と shellcode の理解が浅いので、手を動かして学ぶ(例題探す)</li>
<li>pwntools, gdb-peda の使い方を、簡単な例題と共にチートシート作る <a href=https://github.com/bet4it/hyperpwn>https://github.com/bet4it/hyperpwn</a> これ気になるので使ってみたい</li>
<li>SSP, ASLR などのセキュリティ機構を調べる
<ul>
<li>ASLR については <a href="https://www.youtube.com/watch?v=iCCNEoCKdHE">sat さんの youtube</a> がとっかかりとしてよかった</li>
</ul>
</li>
</ul>
</article>
<footer>
<p class=license>
This document is licensed under
<a href=https://creativecommons.org/licenses/by/4.0/ target=_blank rel="noopener noreferrer">CC-BY-4.0</a>
</p>
<p class=repository>
<a href=https://github.com/uta8a/discussion/discussions/1 target=_blank rel="noopener noreferrer">discussion</a>にコメントする
</p>
</footer>
</main>
</body>
</html>